<!doctype html>

<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">-->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <style>
    .form-control.width-2 {
      width: 3em;
    }

    .form-control.width-4 {
      width: 5em;
    }

  </style>
</head>

<body>

<nav class="navbar navbar-dark bg-dark ">
  <a class="navbar-brand mx-auto" href="#">Timestamp Converter</a>
</nav>


<div class="container">
  <div class="row">

    <div class="col-md my-3">
      <div class="card border-secondary">
        <div class="card-header border-0">
          Timestamp ➔ Date
          <button type="button" class="btn btn-sm btn-light btn-outline-secondary float-right" onclick="resetForms('timestamp')">Reset</button>
        </div>
        <div class="card-body">
          <form action="#" id="timestamp-form">
            <div class="input-group my-3">
              <input class="form-control form-control-lg" type="text" placeholder="timestamp" id="timestamp-input"
                     maxlength="12">
              <div class="input-group-append">
                <button class="btn btn-secondary px-3" type="submit">Go!</button>
              </div>
            </div>
          </form>

          <h2 class="mx-3 my-4" id="timestamp-to-date-result">&nbsp;</h2>

          <hr />


          <div class="btn-group mx-2 my-2" role="group">
            <button type="button" class="btn btn-sm btn-secondary disabled">To start of</button>
            <button type="button" class="btn btn-sm btn-warning">day</button>
            <button type="button" class="btn btn-sm btn-info">month</button>
            <button type="button" class="btn btn-sm btn-dark">year</button>
          </div>



        </div>
      </div>
    </div>

    <div class="col-md my-3">
      <div class="card border-secondary">
        <div class="card-header border-0">
          Date ➔ Timestamp
          <button type="button" class="btn btn-sm btn-light btn-outline-secondary float-right" onclick="resetForms('date')">Reset</button>

        </div>
        <div class="card-body">
          <form action="#" id="date-form" class="form-inline">
            <div class="input-group my-3">
              <input type="text" class="form-control form-control-lg width-2" maxlength="2" placeholder="D"
                     id="date-day">
              <input type="text" class="form-control form-control-lg width-2" maxlength="2" placeholder="M"
                     id="date-month">
              <input type="text" class="form-control form-control-lg width-4" maxlength="5" placeholder="Year"
                     id="date-year">
              <div class="input-group-append">
                <button class="btn btn-secondary px-3" type="submit">Go!</button>
              </div>
            </div>
            <button type="button" class="btn btn-warning mx-3">Today</button>
          </form>

          <h2 class="mx-3 my-3" id="date-to-timestamp-result">&nbsp;</h2>

          <hr />

          <div class="btn-group mx-2 my-2" role="group">
            <button type="button" class="btn btn-sm btn-warning px-3">◀</button>
            <button type="button" class="btn btn-sm btn-warning disabled">Day</button>
            <button type="button" class="btn btn-sm btn-warning px-3">▶</button>
          </div>

          <div class="btn-group mx-2" role="group">
            <button type="button" class="btn btn-sm btn-info px-3">◀</button>
            <button type="button" class="btn btn-sm btn-info disabled">Month</button>
            <button type="button" class="btn btn-sm btn-info px-3">▶</button>
          </div>

          <div class="btn-group mx-2 my-2" role="group">
            <button type="button" class="btn btn-sm btn-dark px-3">◀</button>
            <button type="button" class="btn btn-sm btn-dark disabled">Year</button>
            <button type="button" class="btn btn-sm btn-dark px-3">▶</button>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>

<script>

  function resetForms(type) {
    if (type === 'timestamp') {
      const input = document.getElementById('timestamp-input');
      input.value = '';
      input.focus();
    } else if (type === 'date') {
      const day = document.getElementById('date-day');
      const month = document.getElementById('date-month');
      const year = document.getElementById('date-year');
      day.value = '';
      month.value = '';
      year.value = '';
      day.focus();
    }
  }

  const timestampChanged = (e) => {
    e.preventDefault();
    const timestampValue = document.querySelector('#timestamp-input').value;
    const timestampToDateResult = document.querySelector('#timestamp-to-date-result');
    timestampToDateResult.innerHTML = timestampToDate(timestampValue);
  };

  const dateChanged = (e) => {
    e.preventDefault();
    const day = document.querySelector('#date-day').value || 1;
    const month = document.querySelector('#date-month').value || 1;
    const year = document.querySelector('#date-year').value || 1970;
    const dateToTimestamp = document.querySelector('#date-to-timestamp-result');
    // dateToTimestamp.innerHTML = `${day} - ${month} - ${year}`;
    const newDate = `${month}/${day}/${year}`;
    dateToTimestamp.innerHTML = Date.parse(newDate) / 1000;
  };

  // dodanie listenerów do inputu i do samego formularza
  document.getElementById('timestamp-form').addEventListener('submit', timestampChanged);
  document.getElementById('timestamp-input').addEventListener('keyup', timestampChanged);
  document.getElementById('timestamp-input').focus();

  document.getElementById('date-form').addEventListener('submit', dateChanged);
  document.getElementById('date-year').addEventListener('change', dateChanged);


  function timestampToDate(unix_timestamp) {
    const addLeadingZero = (number) => number < 10 ? `0${number}` : `${number}`;
    const a = new Date(unix_timestamp * 1000);
    const months = ['Styczeń', 'Luty', 'Marzec', 'Kwiecień', 'Maj', 'Czerwiec', 'Lipiec', 'Sierpień', 'Wrzesień', 'Październik', 'Listopad', 'Grudzień'];
    const year = a.getFullYear();
    // const month = months[a.getMonth()];
    const month = addLeadingZero(a.getMonth() + 1); // +1, because returns month from 0
    const date = a.getDate();
    const hour = a.getHours();
    const min = addLeadingZero(a.getMinutes());
    const sec = addLeadingZero(a.getSeconds());
    return `${date}.${month}.${year} ${hour}:${min}:${sec}`;
  }

</script>


</body>
</html>